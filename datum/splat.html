<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><base href="../"><link rel="stylesheet" href="dmdoc.css"><title>/datum/splat - San Francisco</title></head><body><header><a href="index.html">San Francisco</a> - <a href="index.html#modules">Modules</a> - <a href="index.html#types">Types</a> — <a href="datum/splat.html#var">Var Details</a> - <a href="datum/splat.html#proc">Proc Details</a></header><main><h1>Splat <aside>/<a href="datum.html">datum</a>/<a href="datum/splat.html">splat</a></aside> <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L11"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 11"></a></h1><p>A type of supernatural being (like vampires, werewolves, ghouls, etc.) that
players can be. Has traits and actions that are inherent to all members
of the splat.</p>
<p>Also manages the supernatural powers of this splat that the owner has, but
it's limited until future reworks improve powers.</p><table class="summary" cellspacing="0"><tr><td colspan="2"><h2>Vars</h2></td></tr><tr><th><a href="datum/splat.html#var/desc">desc</a></th><td>Description of what the splat is and what it does</td></tr><tr><th><a href="datum/splat.html#var/id">id</a></th><td>ID for trait sources and whatnot</td></tr><tr><th><a href="datum/splat.html#var/incompatible_splats">incompatible_splats</a></th><td>Splats that someone with this splat cannot gain</td></tr><tr><th><a href="datum/splat.html#var/name">name</a></th><td>Name of the splat</td></tr><tr><th><a href="datum/splat.html#var/owner">owner</a></th><td>Mob this splat belongs to</td></tr><tr><th><a href="datum/splat.html#var/power_type">power_type</a></th><td>Base type of the powers that this splat has</td></tr><tr><th><a href="datum/splat.html#var/powers">powers</a></th><td>Powers unique to this splat possessed by the owner</td></tr><tr><th><a href="datum/splat.html#var/splat_actions">splat_actions</a></th><td>Actions possessed by all members of this splat</td></tr><tr><th><a href="datum/splat.html#var/splat_biotypes">splat_biotypes</a></th><td>Biotypes possessed by all members of this splat</td></tr><tr><th><a href="datum/splat.html#var/splat_traits">splat_traits</a></th><td>Traits possessed by all members of this splat</td></tr><tr><td colspan="2"><h2>Procs</h2></td></tr><tr><th><a href="datum/splat.html#proc/add_actions">add_actions</a></th><td>Internal proc to add all of the splat's actions to the new owner on gain.</td></tr><tr><th><a href="datum/splat.html#proc/add_biotypes">add_biotypes</a></th><td>Internal proc to add all of the splat's biotypes to the new owner on gain.</td></tr><tr><th><a href="datum/splat.html#proc/add_splat_traits">add_splat_traits</a></th><td>Internal proc to add all of the splat's traits to the new owner on gain.</td></tr><tr><th><a href="datum/splat.html#proc/assign">assign</a></th><td>Assign this splat to a new owner.</td></tr><tr><th><a href="datum/splat.html#proc/check_roundstart_eligible">check_roundstart_eligible</a></th><td>Checks if a splat is eligible to be picked at roundstart.</td></tr><tr><th><a href="datum/splat.html#proc/clear_powers">clear_powers</a></th><td>Internal proc to clean up all power instances owned by this splat. Called by
unassign() on losing the splat.</td></tr><tr><th><a href="datum/splat.html#proc/create_pref_biotypes_perks">create_pref_biotypes_perks</a></th><td>Adds adds any perks related to the splat's splat_biotypes flags.</td></tr><tr><th><a href="datum/splat.html#proc/create_pref_unique_perks">create_pref_unique_perks</a></th><td>Used to add any splat specific perks to the perk list.</td></tr><tr><th><a href="datum/splat.html#proc/get_features">get_features</a></th><td>Returns a list of strings representing features this splat has.
Used by the preferences UI to know what buttons to show.</td></tr><tr><th><a href="datum/splat.html#proc/get_power">get_power</a></th><td>Standardize this all when the power system is made universal, the procs
have to be implemented on every subtype because powers are currently
completely unrelated datums.</td></tr><tr><th><a href="datum/splat.html#proc/get_splat_description">get_splat_description</a></th><td>Gets a short description for the specices. Should be relatively succinct.
Used in the preference menu.</td></tr><tr><th><a href="datum/splat.html#proc/get_splat_lore">get_splat_lore</a></th><td>Gets the lore behind the type of species. Can be long.
Used in the preference menu.</td></tr><tr><th><a href="datum/splat.html#proc/get_splats_perks">get_splats_perks</a></th><td>Generates a list of &quot;perks&quot; related to this splat
(Postives, neutrals, and negatives)
in the format of a list of lists.
Used in the preference menu.</td></tr><tr><th><a href="datum/splat.html#proc/on_gain">on_gain</a></th><td>Effects on gaining the splat.</td></tr><tr><th><a href="datum/splat.html#proc/on_lose">on_lose</a></th><td>Effects on losing the splat normally.</td></tr><tr><th><a href="datum/splat.html#proc/on_lose_or_destroy">on_lose_or_destroy</a></th><td>Effects on losing the splat if the owner isn't null.</td></tr><tr><th><a href="datum/splat.html#proc/prepare_human_for_preview">prepare_human_for_preview</a></th><td>Given a human, will adjust it before taking a picture for the preferences UI.
This should create a CONSISTENT result, so the icons don't randomly change.</td></tr><tr><th><a href="datum/splat.html#proc/remove_actions">remove_actions</a></th><td>Internal proc to remove all of the actions added by this splat on lose.
Checks for and skips actions that also belong to another splat.</td></tr><tr><th><a href="datum/splat.html#proc/remove_biotypes">remove_biotypes</a></th><td>Internal proc to remove all of the biotypes added by this splat on lose.
Checks for and skips biotypes added by the owner's species or other splats.</td></tr><tr><th><a href="datum/splat.html#proc/remove_splat_traits">remove_splat_traits</a></th><td>Internal proc to remove all of the traits added by this splat on lose.</td></tr><tr><th><a href="datum/splat.html#proc/unassign">unassign</a></th><td>Remove this splat from its owner.</td></tr></table><h2 id="var">Var Details</h2><h3 id="var/desc"><aside class="declaration">var </aside>desc <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L17"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 17"></a></h3><p>Description of what the splat is and what it does</p><h3 id="var/id"><aside class="declaration">var </aside>id <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L19"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 19"></a></h3><p>ID for trait sources and whatnot</p><h3 id="var/incompatible_splats"><aside class="declaration">var </aside>incompatible_splats <aside>– /list</aside> <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L31"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 31"></a></h3><p>Splats that someone with this splat cannot gain</p><h3 id="var/name"><aside class="declaration">var </aside>name <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L15"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 15"></a></h3><p>Name of the splat</p><h3 id="var/owner"><aside class="declaration">var </aside>owner <aside>– /<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a></aside> <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L36"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 36"></a></h3><p>Mob this splat belongs to</p><h3 id="var/power_type"><aside class="declaration">var </aside>power_type <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L28"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 28"></a></h3><p>Base type of the powers that this splat has</p><h3 id="var/powers"><aside class="declaration">var </aside>powers <aside>– /list/<a href="datum.html">datum</a>/<a href="datum/action.html">action</a></aside> <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L34"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 34"></a></h3><p>Powers unique to this splat possessed by the owner</p><h3 id="var/splat_actions"><aside class="declaration">var </aside>splat_actions <aside>– /list</aside> <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L24"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 24"></a></h3><p>Actions possessed by all members of this splat</p><h3 id="var/splat_biotypes"><aside class="declaration">var </aside>splat_biotypes <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L26"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 26"></a></h3><p>Biotypes possessed by all members of this splat</p><h3 id="var/splat_traits"><aside class="declaration">var </aside>splat_traits <aside>– /list</aside> <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/__splat.dm#L22"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/__splat.dm 22"></a></h3><p>Traits possessed by all members of this splat</p><h2 id="proc">Proc Details</h2><h3 id="proc/add_actions"><aside class="declaration">proc </aside>add_actions<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/gaining_splats.dm#L60"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/gaining_splats.dm 60"></a></aside></h3><p>Internal proc to add all of the splat's actions to the new owner on gain.</p><h3 id="proc/add_biotypes"><aside class="declaration">proc </aside>add_biotypes<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/gaining_splats.dm#L70"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/gaining_splats.dm 70"></a></aside></h3><p>Internal proc to add all of the splat's biotypes to the new owner on gain.</p><h3 id="proc/add_splat_traits"><aside class="declaration">proc </aside>add_splat_traits<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/gaining_splats.dm#L51"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/gaining_splats.dm 51"></a></aside></h3><p>Internal proc to add all of the splat's traits to the new owner on gain.</p><h3 id="proc/assign"><aside class="declaration">proc </aside>assign<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/owner)  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/gaining_splats.dm#L21"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/gaining_splats.dm 21"></a></aside></h3><p>Assign this splat to a new owner.</p>
<p>Fails if the new owner cannot be given the splat or a signal return cancels
it. Proceeds to give the splat to the owner and add its traits, actions, and
biotypes before applying on_gain() effects. Returns the splat on success.</p>
<p>Arguments:</p>
<ul>
<li>owner - Mob gaining the splat.</li>
</ul><h3 id="proc/check_roundstart_eligible"><aside class="declaration">proc </aside>check_roundstart_eligible<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/splat_configs.dm#L21"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/splat_configs.dm 21"></a></aside></h3><p>Checks if a splat is eligible to be picked at roundstart.</p>
<p>Checks the config to see if this splat is allowed to be picked in the character setup menu.
Used by [/proc/generate_selectable_splat_and_languages].</p><h3 id="proc/clear_powers"><aside class="declaration">proc </aside>clear_powers<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/powers/st_power_management.dm#L25"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/powers/st_power_management.dm 25"></a></aside></h3><p>Internal proc to clean up all power instances owned by this splat. Called by
unassign() on losing the splat.</p><h3 id="proc/create_pref_biotypes_perks"><aside class="declaration">proc </aside>create_pref_biotypes_perks<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/prefrences/pref_info.dm#L46"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/prefrences/pref_info.dm 46"></a></aside></h3><p>Adds adds any perks related to the splat's splat_biotypes flags.</p>
<p>Returns a list containing perks, or an empty list.</p><h3 id="proc/create_pref_unique_perks"><aside class="declaration">proc </aside>create_pref_unique_perks<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/prefrences/pref_info.dm#L38"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/prefrences/pref_info.dm 38"></a></aside></h3><p>Used to add any splat specific perks to the perk list.</p>
<p>Returns null by default. When overriding, return a list of perks.</p><h3 id="proc/get_features"><aside class="declaration">proc </aside>get_features<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/prefrences/splat_pref.dm#L3"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/prefrences/splat_pref.dm 3"></a></aside></h3><p>Returns a list of strings representing features this splat has.
Used by the preferences UI to know what buttons to show.</p><h3 id="proc/get_power"><aside class="declaration">proc </aside>get_power<aside>(power_type) <span class="as"> as </span>/<a href="datum.html">datum</a>/<a href="datum/action.html">action</a> <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/powers/st_power_management.dm#L7"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/powers/st_power_management.dm 7"></a></aside></h3><p>Standardize this all when the power system is made universal, the procs
have to be implemented on every subtype because powers are currently
completely unrelated datums.</p><h3 id="proc/get_splat_description"><aside class="declaration">proc </aside>get_splat_description<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/prefrences/pref_info.dm#L12"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/prefrences/pref_info.dm 12"></a></aside></h3><p>Gets a short description for the specices. Should be relatively succinct.
Used in the preference menu.</p>
<p>Returns a string.</p><h3 id="proc/get_splat_lore"><aside class="declaration">proc </aside>get_splat_lore<aside>() <span class="as"> as </span>/list <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/prefrences/pref_info.dm#L25"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/prefrences/pref_info.dm 25"></a></aside></h3><p>Gets the lore behind the type of species. Can be long.
Used in the preference menu.</p>
<p>Returns a list of strings.
Between each entry in the list, a newline will be inserted, for formatting.</p><h3 id="proc/get_splats_perks"><aside class="declaration">proc </aside>get_splats_perks<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/prefrences/pref_info.dm#L78"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/prefrences/pref_info.dm 78"></a></aside></h3><p>Generates a list of &quot;perks&quot; related to this splat
(Postives, neutrals, and negatives)
in the format of a list of lists.
Used in the preference menu.</p>
<p>&quot;Perk&quot; format is as followed:
list(
SPECIES_PERK_TYPE = type of perk (postiive, negative, neutral - use the defines)
SPECIES_PERK_ICON = icon shown within the UI
SPECIES_PERK_NAME = name of the perk on hover
SPECIES_PERK_DESC = description of the perk on hover
)</p>
<p>Returns a list of lists.
The outer list is an assoc list of [perk type]s to a list of perks.
The innter list is a list of perks. Can be empty, but won't be null.</p><h3 id="proc/on_gain"><aside class="declaration">proc </aside>on_gain<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/gaining_splats.dm#L8"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/gaining_splats.dm 8"></a></aside></h3><p>Effects on gaining the splat.</p>
<p>Overridable proc that handles all splat-specific behavior when the splat is
gained. Called in assign() after the owner gained the splat and its traits,
actions, and biotypes were added.</p><h3 id="proc/on_lose"><aside class="declaration">proc </aside>on_lose<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/losing_splats.dm#L8"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/losing_splats.dm 8"></a></aside></h3><p>Effects on losing the splat normally.</p>
<p>Overridable proc that handles most splat-specific behavior when the splat is
lost. Called in unassign() before any part of the splat is removed from the
owner. Not called if the owner is being deleted.</p><h3 id="proc/on_lose_or_destroy"><aside class="declaration">proc </aside>on_lose_or_destroy<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/losing_splats.dm#L19"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/losing_splats.dm 19"></a></aside></h3><p>Effects on losing the splat if the owner isn't null.</p>
<p>Overridable proc that handles splat-specific behavior when the splat is lost.
Called in unassign() before anything else whether or not the owner is being
deleted. Should be used only for cleanup like removing the owner from a
splat-specific global list.</p><h3 id="proc/prepare_human_for_preview"><aside class="declaration">proc </aside>prepare_human_for_preview<aside>(/<a href="mob.html">mob</a>/<a href="mob/living.html">living</a>/<a href="mob/living/carbon.html">carbon</a>/<a href="mob/living/carbon/human.html">human</a>/human)  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/prefrences/pref_info.dm#L3"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/prefrences/pref_info.dm 3"></a></aside></h3><p>Given a human, will adjust it before taking a picture for the preferences UI.
This should create a CONSISTENT result, so the icons don't randomly change.</p><h3 id="proc/remove_actions"><aside class="declaration">proc </aside>remove_actions<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/losing_splats.dm#L73"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/losing_splats.dm 73"></a></aside></h3><p>Internal proc to remove all of the actions added by this splat on lose.
Checks for and skips actions that also belong to another splat.</p><h3 id="proc/remove_biotypes"><aside class="declaration">proc </aside>remove_biotypes<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/losing_splats.dm#L96"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/losing_splats.dm 96"></a></aside></h3><p>Internal proc to remove all of the biotypes added by this splat on lose.
Checks for and skips biotypes added by the owner's species or other splats.</p><h3 id="proc/remove_splat_traits"><aside class="declaration">proc </aside>remove_splat_traits<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/losing_splats.dm#L64"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/losing_splats.dm 64"></a></aside></h3><p>Internal proc to remove all of the traits added by this splat on lose.</p><h3 id="proc/unassign"><aside class="declaration">proc </aside>unassign<aside>()  <a href="https://github.com/Stutternov/SecondCity/blob/2a4a539c11d97d42fda25bc35478d58408dba648/modular_darkpack/modules/splats/code/losing_splats.dm#L30"><img src="git.png" width="16" height="16" title="modular_darkpack/modules/splats/code/losing_splats.dm 30"></a></aside></h3><p>Remove this splat from its owner.</p>
<p>Fails if the owner is null, or cleans up the splat if the owner is being
deleted. First applies on_lose() effects then removes all of the splat's
traits, actions, and biotypes that were added in assign() before removing
the splat entirely.</p></main><footer>tgstation.dme <a href="https://github.com/Stutternov/SecondCity/tree/2a4a539c11d97d42fda25bc35478d58408dba648">2a4a539</a> (master) — <a href="https://github.com/SpaceManiac/SpacemanDMM/blob/master/crates/dmdoc/README.md">dmdoc 1.11.0</a></footer></body></html>